/**
 * BrandOS Smart Pixel v1.0
 * @license MIT
 */
(function(){'use strict';var s=document.currentScript||document.querySelector('script[data-key^="bos_"]');if(!s)return;var c={key:s.getAttribute('data-key'),location:s.getAttribute('data-location'),debug:s.getAttribute('data-debug')==='true',api:s.getAttribute('data-api')||'https://app.brandos.com'};if(!c.key)return;var l=c.debug?function(){var a=Array.prototype.slice.call(arguments);a.unshift('[BrandOS]');console.log.apply(console,a)}:function(){};var u=c.api+'/api/pixel/v1/facts?key='+encodeURIComponent(c.key);if(c.location)u+='&location='+encodeURIComponent(c.location);l('Fetching:',u);fetch(u,{method:'GET',mode:'cors',credentials:'omit'}).then(function(r){if(!r.ok)return r.json().then(function(e){throw new Error(e.message||'API error: '+r.status)}).catch(function(){throw new Error('API error: '+r.status)});return r.json()}).then(function(d){var e=document.createElement('script');e.type='application/ld+json';e.id='brandos-jsonld';e.textContent=JSON.stringify(d);var x=document.getElementById('brandos-jsonld');if(x)x.parentNode.removeChild(x);document.head.appendChild(e);l('Injected:',d.name||'Organization');if(typeof CustomEvent==='function')document.dispatchEvent(new CustomEvent('brandos:loaded',{detail:{organization:d.name,type:d['@type']}}))}).catch(function(e){l('Error:',e.message);if(typeof CustomEvent==='function')document.dispatchEvent(new CustomEvent('brandos:error',{detail:{error:e.message}}))})})();
